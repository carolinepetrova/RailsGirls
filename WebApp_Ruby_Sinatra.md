# Уеб приложение със Sinatra
Инсталация на Sinatra

`gem install sinatra --no-document`

Добавяне на Sinatra към проекта ни

`require 'sinatra'`

## Mалко терминология
**Уеб приложение** - програма, разположена на отдалечен сървър, която може да се достъпи през Интернет чрез уеб браузър.

**Сървър** - Сървърът е компютър, който обработва заявки и доставя данни до друг компютър през интернет или локално.

**Уеб сървър** - програма, която позволява на даден компютър да предоставя информация на други компютри, под формата на HTML страници.

**HTTP** - протокол за трансфер на хипертекст в Интернет. Комуникацията между уеб браузър и уеб сървър се извършва чрез HTTP заявки и HTTP отговори.

**HTTP заявки** - 8 вида заявки. В рамките на workshop-a ще разгледаме само `GET`. Oстаналите може да намерите [тук](https://bg.wikipedia.org/wiki/HTTP#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4%D0%B8_%D0%BD%D0%B0_%D0%B7%D0%B0%D1%8F%D0%B2%D0%BA%D0%B8%D1%82%D0%B5)

**Model-View-Controller** - архитектурен шаблон за дизайн в програмирането. Разделя логиката от графичния интерфейс.
- Модел:  Съдържа логическата структура на данните, т.е. дефинициите на обектите и методите им. 
- Изглед: Представлява визуалната част на сайта.
- Контролер: Връзката между модела и изгледа. Взима данните от модела и ги обработва преди да ги предаде на изгледа.

## Routes

В Sinatra маршрутите се задават чрез името на HTTP заявка и URL съвпадащ модел. Всеки маршрут се асоциира с блок код.

Блокът 
```Ruby
require 'sinatra'

get '/' do
  "Hello world!"
end
```
Ще визуализира на началната страница на приложението ни съобщението `Hello world!`

**Как се случва това?**

Когато достъпим началната страница ние правим GET заявка към сървъра. Sinatra тогава се обръща към блока, на който съотвтства URL адреса и рендерира всичко, което е в блока. Следователно можем да заменим `Hello world!` с HTML код. 

```Ruby
require 'sinatra'

get '/' do
 "<html>
   <head>
      <title>Hello, world!</title>
   </head>
   <body>
      <h1>This is my first dynamic website</h1>
   </body>
  </html>
 "
end
```

### Също така можем да подаваме и параметри по URL адреса, които да използваме в кода си. 

--- Тук трябва да има готино парче код, което трябва да представлява input, който чрез get заявка променя welcome message-a, който се изобразява, но адски мн ме мързи, защото е 22:47 и имам логическо утре :(

## Нека отделим HTML-a в отделен файл. 
Създаваме папка views в текущата директория на ruby файла ни. Вътре в нея създаваме файл `index.erb` и там пренасяме html кода си. 

Извикването на файла с HTML кода става по следния начин:
```Ruby
get '/' do
  erb :index
end
```

**Какво се случва тук?**

Q: Какво е ERB? 
А: "templating engine". Позволява ни да миксираме Ruby и HTML. Така можем да създадем динамични страници. 

Sinatra използва MVC шаблона. Следователно, когато му подадем команда `erb: name_of_file` той почва да търси за папка views, намира файла и рендерира съдържанието му.
